var app=angular.module("AssetManager",["ngRoute","ui.bootstrap","nvd3ChartDirectives","colorpicker.module"]);app.factory("Session",function(c,a){var b={data:{configured:true,loggedin:false,userinfo:{userid:"-1",username:"unknown",displayname:"Unknown",accessroles:[-1]}},currentuser:{username:"unknown",displayname:"unknown",admin:false},defferred:a.defer(),updateSession:function(){b.defferred=a.defer();c.post("login/get_login_info").then(function(d){b.data=d.data;b.currentuser.username=b.data.userinfo["username"];b.currentuser.displayname=b.data.userinfo["displayname"];b.currentuser.admin=b.data.userinfo["admin"];b.defferred.resolve()},function(d){b.defferred.resolve()})},assetsotherinfo:{},assetsotherinfodefferred:a.defer(),getAssetsOtherInfo:function(){b.assetsotherinfodefferred=a.defer();c.post("home/getotherinfo").then(function(d){b.assetsotherinfo=d.data;b.assetsotherinfodefferred.resolve()},function(d){b.assetsotherinfodefferred.resolve()})},assetsinfo:{},assetsinfodefferred:a.defer(),getAssetsInfo:function(){b.assetsinfodefferred=a.defer();c.post("home/getnetassets").then(function(d){b.assetsinfo=d.data;b.assetsinfodefferred.resolve()},function(d){b.assetsinfodefferred.resolve()})}};b.assetsotherinfodefferred.resolve();b.assetsinfodefferred.resolve();b.updateSession();return b});app.config(function(b,a){b.when("/home",{controller:"homeController",templateUrl:"ui/partials/home.html",resolve:{toAllowOrNot:checkStatus}}).when("/login",{controller:"loginController",templateUrl:"ui/partials/login.html",resolve:{toAllowOrNot:checkStatus}}).when("/user/users",{templateUrl:"ui/partials/usersinfo.html",resolve:{toAllowOrNot:checkStatus}}).when("/user/:type",{controller:"userController",templateUrl:"ui/partials/user.html",resolve:{toAllowOrNot:checkStatus}}).when("/user",{templateUrl:"ui/partials/userprofile.html",resolve:{toAllowOrNot:checkStatus}}).when("/",{controller:"welcomeController",templateUrl:"ui/partials/welcome.html",resolve:{toAllowOrNot:checkStatus}}).otherwise({redirectTo:"/"});a.html5Mode(true)});app.directive("assets",function(){return{restrict:"E",templateUrl:"ui/partials/assets.html"}});app.directive("categories",function(){return{restrict:"E",templateUrl:"ui/partials/categories.html"}});app.directive("subcategories",function(){return{restrict:"E",templateUrl:"ui/partials/subcategories.html"}});app.directive("riskbasedassets",function(){return{restrict:"E",templateUrl:"ui/partials/riskbasedassets.html"}});